{% extends "base.html" %}

{% block title %}
  {{ 'Edit' if entry else 'New' }} Entry - LearnLog
{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="{{ url_for('static', filename='form.css') }}" />
{% endblock %}

{% block content %}
<div class="card p-4 mx-auto form-container form-container-md">
  <h3 class="mb-3 text-center text-dark">
    {{ 'Edit' if entry else 'New' }} Learning Entry
  </h3>

  {% include '_flashes.html' %}

  <form
    method="POST"
    action="{{ url_for('update', id=entry.id) if entry else url_for('entry') }}"
  >
    <div class="mb-3">
      <label for="date" class="form-label text-dark">Date</label>
      <input
        type="date"
        id="date"
        name="date"
        value="{{ entry.date.strftime('%Y-%m-%d') if entry and entry.date else '' }}"
        class="form-control"
        required
      />
    </div>

    <div class="mb-3">
      <label for="title" class="form-label text-dark">Title</label>
      <input
        type="text"
        id="title"
        name="title"
        value="{{ entry.title if entry else '' }}"
        class="form-control"
        placeholder="Entry title"
        required
      />
    </div>

    <div class="mb-3">
      <label for="content" class="form-label text-dark">Content</label>
      <input type="text"
        id="content"
        name="content"
        class="form-control"
        rows="4"
        placeholder="Describe what you learned today..."
        required
      />{{ entry.content if entry else '' }}
    </div>

    <div class="mb-3">
      <label for="tags" class="form-label text-dark">Tags</label>
      <input
        type="text"
        id="tags"
        name="tags"
        value="{{ entry.tags if entry else '' }}"
        class="form-control"
        placeholder="e.g., JavaScript, CSS, Algorithms"
      />
    </div>

    <div class="mb-3">
      <label for="project" class="form-label text-dark">Project</label>
      <input
        type="text"
        id="project"
        name="project"
        value="{{ entry.project if entry else '' }}"
        class="form-control"
        placeholder="Associated project (optional)"
      />
    </div>

    <div class="mb-3">
      <label for="reflection" class="form-label text-dark">Reflection</label>
      <input type="text"
        id="reflection"
        name="reflection"
        class="form-control"
        rows="3"
        placeholder="How did this help you grow?"
      />{{ entry.reflection if entry else '' }}
    </div>

    <div class="mb-3">
      <label for="resources" class="form-label text-dark">Resources</label>
      <input type="text"
        id="resources"
        name="resources"
        class="form-control"
        rows="2"
        placeholder="Links, books, videos..."
      />{{ entry.resources if entry else '' }}
    </div>

    <div class="mb-3">
      <label for="time" class="form-label text-dark">Time Spent (hours)</label>
      <input
        type="number"
        id="time"
        name="time_spent"
        value="{{ entry.time_spent if entry and entry.time_spent is not none else '' }}"
        class="form-control"
        placeholder="e.g., 1.5 for 1.5 hours"
      />
    </div>

    <div class="text-center">
      <button type="submit" class="auth-btn entry-btn w-100">Save Entry</button>
    </div>
  </form>
</div>
{% endblock %}

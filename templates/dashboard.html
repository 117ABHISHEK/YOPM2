{% extends "base.html" %} {% block title %}Dashboard - LearnLog{% endblock %} {%
block head_extra %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='dashboard.css') }}"
/>
{% endblock %} {% block content %}
<header class="d-flex justify-content-between align-items-center mb-4">
  <div class="logo">ðŸ“š LearnLog</div>
  <div>
    <span class="me-3">Welcome, {{ username }}!</span>
    <a href="{{ url_for('logout') }}" class="btn btn-secondary">Logout</a>
  </div>
</header>

<div class="d-flex justify-content-between align-items-center">
  <h1>Your Learning Entries</h1>
  <a href="{{ url_for('entry') }}" class="btn btn-primary">Add New Entry</a>
</div>

<div class="card mt-3">
  <div class="card-body">
    {% if entries %}
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Date</th>
          <th>Title</th>
          <th>Tags</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for entry in entries %}
        <tr>
          <td>{{ entry.date.strftime('%Y-%m-%d') }}</td>
          <td>{{ entry.title }}</td>
          <td>
            {% if entry.tags %} {% for tag in entry.tags.split(',') if
            tag.strip() %}
            <span class="badge bg-secondary me-1">{{ tag.strip() }}</span>
            {% endfor %} {% else %}
            <span class="badge bg-light text-dark">None</span>
            {% endif %}
          </td>
          <td>
            <a
              href="{{ url_for('view_entry', id=entry['id']) }}"
              class="btn btn-sm btn-info"
              >View</a
            >
            <a
              href="{{ url_for('update', id=entry['id']) }}"
              class="btn btn-sm btn-warning"
              >Edit</a
            >
            <a
              href="{{ url_for('delete', id=entry['id']) }}"
              class="btn btn-danger"
              data-url="{{ url_for('delete', id=entry['id']) }}"
              onclick="confirmDelete(event, this.dataset.url)"
            >
              Delete
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="text-center">
      You haven't added any learning entries yet.
      <a href="{{ url_for('entry') }}">Add your first one!</a>
    </p>
    {% endif %}
  </div>
</div>

{% if total_pages > 1 %}
<nav aria-label="Page navigation" class="mt-4">
  <ul class="pagination justify-content-center">
    <li class="page-item {% if page <= 1 %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for('dashboard', page=page-1) }}"
        >Previous</a
      >
    </li>

    {% for page_num in range(1, total_pages + 1) %}
    <li class="page-item {% if page_num == page %}active{% endif %}">
      <a class="page-link" href="{{ url_for('dashboard', page=page_num) }}"
        >{{ page_num }}</a
      >
    </li>
    {% endfor %}

    <li class="page-item {% if page >= total_pages %}disabled{% endif %}">
      <a class="page-link" href="{{ url_for('dashboard', page=page+1) }}"
        >Next</a
      >
    </li>
  </ul>
</nav>
{% endif %} {% endblock %}
